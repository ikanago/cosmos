{
    "name": "cosmos",
    "build": {
        "dockerfile": "Dockerfile",
        "args": {
            "VARIANT": "vnc"
        }
    },
    "forwardPorts": [6080],
    "overrideCommand": false,
    "containerEnv": {
        // Port for noVNC Web Client & WebSocket
        "NOVNC_PORT": "6080",
        // VNC port QEMU listens. Default to 5900 + <display number>
        // If you run QEMU with "-vnc :1", then VNC_PORT should be 5901.
        "VNC_PORT": "5900",
        // QEMU launch options. Used in `run_image.sh`
        "QEMU_OPTS": "-vnc :0"
    },
    "extensions": [
        "bungcip.better-toml",
        "rust-lang.rust-analyzer",
        "oderwat.indent-rainbow",
        "slevesque.vscode-hexdump"
    ],
    // Required by `mounts`.
    // c.f. https://code.visualstudio.com/remote/advancedcontainers/improve-performance#_use-a-targeted-named-volume
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/cosmos,type=bind,consistency=cached",
    "workspaceFolder": "/workspaces/cosmos",
    "mounts": [
        "source=${localWorkspaceFolderBasename}-target,target=${containerWorkspaceFolder}/target,type=volume"
    ],
    "postCreateCommand": "/usr/bin/git config --global gpg.program /usr/bin/gpg && /usr/bin/git config --global commit.gpgsign true && sudo chown vscode target",
    // Comment out connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
    "remoteUser": "vscode",
    "runArgs": [
        "--privileged",
        "--disable-content-trust=true"
    ]
}